{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst button = document.querySelector(\".btn\");\nconst calendar = document.querySelector(\"#datetime-picker\");\nconst daysHTML = document.querySelector(`.value[data-days]`);\nconst hoursHTML = document.querySelector(`.value[data-hours]`);\nconst minutesHTML = document.querySelector(`.value[data-minutes]`);\nconst secondsHTML = document.querySelector(`.value[data-seconds]`);\nlet userSelectedDate = null;\n\nbutton.disabled = true;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      const selectedDate = selectedDates[0];\n      const currentDate = new Date();\n      if (selectedDate <= currentDate) {\n          iziToast.show({\n            title: 'Error',\n              message: 'Illegal operation',\n              position: 'topRight',\n              messageColor: '#fff',\n              titleColor: '#fff',\n              color: '#ef4040',\n              iconUrl: '../img/bi_x-octagon.svg'\n\n            });\n          button.disabled = true;\n          return\n      }\n     userSelectedDate = selectedDate;\n     button.disabled = false;\n  },\n};\n\nflatpickr(calendar, options);\n\nbutton.addEventListener(\"click\", handleClick);\n\n\nlet isActive = false\nfunction handleClick() {\n    if (isActive) {\n        return\n    }\n    isActive = true;\n    if (isActive === true) {\n        button.disabled = true;\n        calendar.disabled = true;\n    }\n    setInterval(() => {\n        const currentTime = Date.now();\n        const chosenTime = userSelectedDate.getTime();\n        const deltaTime = chosenTime - currentTime;\n\n         if (deltaTime <= 0) {\n            clearInterval(timerId);\n            daysHTML.textContent = \"00\";\n            hoursHTML.textContent = \"00\";\n            minutesHTML.textContent = \"00\";\n            secondsHTML.textContent = \"00\";\n            return;\n        }\n        const {days, hours, minutes, seconds} = convertMs(deltaTime);\n        \n        const addLeadingZero = (value) => String(value).padStart(2, \"0\");\n        daysHTML.textContent = addLeadingZero(days);\n        hoursHTML.textContent = addLeadingZero(hours);\n        minutesHTML.textContent = addLeadingZero(minutes);\n        secondsHTML.textContent = addLeadingZero(seconds);\n        \n    \n    }, 1000);\n    \n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n}"],"names":["button","calendar","daysHTML","hoursHTML","minutesHTML","secondsHTML","userSelectedDate","options","selectedDates","selectedDate","iziToast","flatpickr","handleClick","isActive","currentTime","deltaTime","days","hours","minutes","seconds","convertMs","addLeadingZero","value","ms"],"mappings":"+IAKA,MAAMA,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAc,SAAS,cAAc,sBAAsB,EACjE,IAAIC,EAAmB,KAEvBN,EAAO,SAAW,GAClB,MAAMO,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,MAAMC,EAAeD,EAAc,CAAC,EAEpC,GAAIC,GADgB,IAAI,KACS,CAC7BC,EAAS,KAAK,CACZ,MAAO,QACL,QAAS,oBACT,SAAU,WACV,aAAc,OACd,WAAY,OACZ,MAAO,UACP,QAAS,yBAEvB,CAAa,EACHV,EAAO,SAAW,GAClB,MACH,CACFM,EAAmBG,EACnBT,EAAO,SAAW,EACpB,CACH,EAEAW,EAAUV,EAAUM,CAAO,EAE3BP,EAAO,iBAAiB,QAASY,CAAW,EAG5C,IAAIC,EAAW,GACf,SAASD,GAAc,CACfC,IAGJA,EAAW,GACPA,IAAa,KACbb,EAAO,SAAW,GAClBC,EAAS,SAAW,IAExB,YAAY,IAAM,CACd,MAAMa,EAAc,KAAK,MAEnBC,EADaT,EAAiB,UACLQ,EAE9B,GAAIC,GAAa,EAAG,CACjB,cAAc,OAAO,EACrBb,EAAS,YAAc,KACvBC,EAAU,YAAc,KACxBC,EAAY,YAAc,KAC1BC,EAAY,YAAc,KAC1B,MACH,CACD,KAAM,CAAC,KAAAW,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAIC,EAAUL,CAAS,EAErDM,EAAkBC,GAAU,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAC/DpB,EAAS,YAAcmB,EAAeL,CAAI,EAC1Cb,EAAU,YAAckB,EAAeJ,CAAK,EAC5Cb,EAAY,YAAciB,EAAeH,CAAO,EAChDb,EAAY,YAAcgB,EAAeF,CAAO,CAGnD,EAAE,GAAI,EAEX,CAEA,SAASC,EAAUG,EAAI,CAOrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAC1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EACpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EACjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}